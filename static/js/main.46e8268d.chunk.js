(this.webpackJsonptodo_app=this.webpackJsonptodo_app||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),o=n(9),a=n.n(o),r=(n(15),n(16),n(17),n(2)),i=n(3),l=n(4),u=n.n(l),d=function(e,t){return fetch("".concat("https://mate.academy/students-api").concat(e),t).then((function(e){if(!e.ok)throw new Error("Problem with loading data...");return e.json()}))},j=function(e,t){return d(e,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)})},m=function(e,t){var n,c;n="/todos/".concat(e),c=t,d(n,{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(c)})},b=function(e){return d("/todos/".concat(e),{method:"DELETE"})},h=n(0),p=s.a.memo((function(e){var t=e.item,n=Object(c.useContext)(x),s=n.setTodos,o=n.setToggleAll,a=Object(c.useState)(!1),l=Object(r.a)(a,2),d=l[0],j=l[1],p=Object(c.useState)(""),O=Object(r.a)(p,2),f=O[0],v=O[1],g=function(e){s((function(n){return n.map((function(n){return n.id===t.id?(m(e,{title:f}),Object(i.a)(Object(i.a)({},n),{},{title:f})):n}))}))};return Object(h.jsxs)("li",{className:u()({completed:t.completed,editing:d}),onDoubleClick:function(){j(!0)},children:[Object(h.jsxs)("div",{className:"view",children:[Object(h.jsx)("input",{type:"checkbox",className:"toggle",id:"toggle-view",checked:t.completed,onChange:function(){var e;e=t.id,s((function(t){return t.map((function(t){return t.id===e?(t.completed&&o(!1),m(e,{completed:!t.completed}),Object(i.a)(Object(i.a)({},t),{},{completed:!t.completed})):t}))}))}}),Object(h.jsx)("label",{htmlFor:"toggle-view",children:t.title}),Object(h.jsx)("button",{type:"button",className:"destroy",onClick:function(){var e;e=t.id,s((function(t){return t.filter((function(t){return t.id===e&&b(e),t.id!==e}))}))}})]}),d&&Object(h.jsx)("input",{type:"text",className:"edit",value:f,autoFocus:!0,onChange:function(e){return v(e.target.value)},onBlur:function(e){f?(g(t.id),v(""),j(!1)):(v(""),j(!1))},onKeyDown:function(e){"Enter"===e.code&&f&&(g(t.id),v(""),j(!1)),"Escape"===e.code&&(v(""),j(!1))}})]})})),O=function(e){var t=e.items;return Object(h.jsx)("ul",{className:"todo-list",children:t.map((function(e){return Object(h.jsx)(s.a.Fragment,{children:Object(h.jsx)(p,{item:e})},e.id)}))})},f=function(e){var t=e.sortParam,n=e.setSortParam;return Object(h.jsxs)("ul",{className:"filters",children:[Object(h.jsx)("li",{children:Object(h.jsx)("a",{href:"#/",className:u()({selected:"all"===t}),onClick:function(){return n("all")},children:"All"})}),Object(h.jsx)("li",{children:Object(h.jsx)("a",{href:"#/active",className:u()({selected:"active"===t}),onClick:function(){return n("active")},children:"Active"})}),Object(h.jsx)("li",{children:Object(h.jsx)("a",{href:"#/completed",className:u()({selected:"completed"===t}),onClick:function(){return n("completed")},children:"Completed"})})]})},x=s.a.createContext([]),v=s.a.memo((function(e){var t=e.id,n=Object(c.useState)([]),s=Object(r.a)(n,2),o=s[0],a=s[1],l=Object(c.useState)(""),u=Object(r.a)(l,2),p=u[0],v=u[1],g=Object(c.useState)(!1),N=Object(r.a)(g,2),y=N[0],S=N[1],_=Object(c.useState)(!1),k=Object(r.a)(_,2),C=k[0],w=k[1],I=Object(c.useState)("all"),U=Object(r.a)(I,2),A=U[0],E=U[1];Object(c.useEffect)((function(){t&&function(e){return d("/todos?userId=".concat(e))}(t).then(a)}),[t,C]);var T=Object(c.useMemo)((function(){var e=o.reduce((function(e,t){return t.completed?e+1:e}),0);return function(e){e===o.length&&o.length>0&&S(!0),0===e&&S(!1)}(e),e}),[o]),F={todos:o,setTodos:a,setToggleAll:S},P=function(){w((function(e){return!e}))},J=Object(c.useMemo)((function(){switch(A){case"active":return o.filter((function(e){return!e.completed}));case"completed":return o.filter((function(e){return e.completed}));default:return o}}),[A,o]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("header",{className:"header",children:[Object(h.jsx)("h1",{children:"todos"}),Object(h.jsx)("form",{onSubmit:function(e){var n,c;e.preventDefault(),p&&(v(""),(n=p,c=t,j("/todos",{title:n,userId:c,completed:!1})).then(P))},children:Object(h.jsx)("input",{type:"text",className:"new-todo",placeholder:"What needs to be done?",value:p,onChange:function(e){var t=e.target;v(t.value)}})})]}),Object(h.jsxs)("section",{className:"main",children:[Object(h.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",disabled:0===o.length,checked:y,onChange:function(){a(y?function(e){return e.map((function(e){return e.completed?(m(e.id,{completed:!1}),Object(i.a)(Object(i.a)({},e),{},{completed:!1})):(S(!1),e)}))}:function(e){return e.map((function(e){return e.completed?(S(!0),e):(m(e.id,{completed:!0}),Object(i.a)(Object(i.a)({},e),{},{completed:!0}))}))})}}),Object(h.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),Object(h.jsx)(x.Provider,{value:F,children:Object(h.jsx)(O,{items:J})})]}),o.length>0&&Object(h.jsxs)("footer",{className:"footer",children:[Object(h.jsx)("span",{className:"todo-count",children:T>0&&"".concat(T," ").concat(T>1?"items":"item"," left")}),Object(h.jsx)(f,{sortParam:A,setSortParam:E}),Object(h.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){a((function(e){return e.filter((function(e){return e.completed&&b(e.id),!e.completed}))}))},children:T>0&&"Clear completed"})]})]})})),g=function(e){var t=e.name;return Object(h.jsx)("div",{className:"info App-info",children:Object(h.jsxs)("h3",{className:"info-title",children:["by"," ",t||"..."]})})},N=n(10),y=n(7),S=(n(19),function(e){var t=e.property,n=e.value,c=e.changeUser,s=e.condition,o=e.isSubmitted,a=e.description;return Object(h.jsxs)("label",{htmlFor:n,children:[Object(h.jsx)("h4",{className:"add-user-form__input-title",children:n}),Object(h.jsx)("input",{className:"add-user-form__input",type:"text",id:n,placeholder:"Enter your ".concat(n),value:t,onChange:function(e){var t=e.target;c(t,n,s)}}),!s&&o&&Object(h.jsx)("span",{className:"add-user-form__input-error-message",children:"Invalid ".concat(n," ").concat(a)})]})}),_=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$/,k=/[0-9]{9}/,C=function(e){var t=e.setUser,n=e.storageKey,s=Object(c.useState)(!1),o=Object(r.a)(s,2),a=o[0],l=o[1],u=Object(c.useState)({name:"",username:"",email:"",phone:""}),d=Object(r.a)(u,2),m=d[0],b=d[1],p=function(e,t){b((function(n){return Object(i.a)(Object(i.a)({},n),{},Object(y.a)({},t,e.value))}))};return Object(h.jsxs)("form",{className:"add-user-form",onSubmit:function(e){e.preventDefault(),l(!0);var c=m.name,s=m.username,o=m.email,a=m.phone;c.length>=3&&s.length>=3&&_.test(o)&&k.test(a)&&(function(e,t,n,c){return j("/users",{name:e,username:t,email:n,phone:c})}(c,s,o,a).then((function(e){t(e);var c=JSON.parse(localStorage.getItem(n)||"[]");localStorage.setItem(n,JSON.stringify([].concat(Object(N.a)(c),[{id:e.id,name:e.name}])))})),b({name:"",username:"",email:"",phone:""}),l(!1))},children:[Object(h.jsx)("h3",{className:"add-user-form__title",children:"Add user form"}),Object(h.jsx)(S,{property:m.name,value:"name",changeUser:p,condition:m.name.length>=3,isSubmitted:a,description:"(min 3 characters)"}),Object(h.jsx)(S,{property:m.username,value:"username",changeUser:p,condition:m.username.length>=3,isSubmitted:a,description:"(min 3 characters)"}),Object(h.jsx)(S,{property:m.email,value:"email",changeUser:p,condition:_.test(m.email),isSubmitted:a,description:"address"}),Object(h.jsx)(S,{property:m.phone,value:"phone",changeUser:p,condition:k.test(m.phone),isSubmitted:a,description:"number (9 digits)"}),Object(h.jsx)("button",{className:"add-user-form__button",type:"submit",children:"Create user"})]})},w=(n(20),function(e){var t=e.storageKey,n=e.setUser,s=e.setIsSavedList,o=Object(c.useState)([]),a=Object(r.a)(o,2),i=a[0],l=a[1];Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem(t)||"[]");l(e)}),[]);var u=function(e){(function(e){return d("/users/".concat(e))})(e).then(n)};return Object(h.jsx)("ul",{className:"users-list",children:i.length?i.map((function(e){return Object(h.jsx)("li",{className:"users-list__item",children:Object(h.jsx)("button",{type:"button",onClick:function(){return u(e.id)},children:e.name})},e.id)})):Object(h.jsxs)("div",{className:"users-list__info",children:[Object(h.jsx)("span",{className:"users-list__info-text",children:"There are no users with todo list yet"}),Object(h.jsx)("button",{type:"button",onClick:function(){return s(!1)},children:"Create new user"})]})})}),I=(n(21),function(e){var t=e.setIsChecked,n=e.setIsSavedList;return Object(h.jsxs)("div",{className:"welcome-block app__welcome-block",children:[Object(h.jsx)("h3",{className:"welcome-block__title",children:"Hi, wellcome!"}),Object(h.jsxs)("div",{className:"welcome-block__question",children:[Object(h.jsx)("h3",{className:"welcome-block__question-title",children:"Did you have saved todo list?"}),Object(h.jsxs)("div",{className:"welcome-block__question-buttons",children:[Object(h.jsx)("button",{type:"button",className:"welcome-block__question-button",onClick:function(){t(!0),n(!0)},children:"Yes"}),Object(h.jsx)("button",{type:"button",className:"welcome-block__question-button",onClick:function(){t(!0)},children:"No"})]})]})]})}),U=(n(22),function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),n=t[0],s=t[1],o=Object(c.useState)(!1),a=Object(r.a)(o,2),i=a[0],l=a[1],u=Object(c.useState)(!1),d=Object(r.a)(u,2),j=d[0],m=d[1],b="todoListStorageKey";return Object(h.jsxs)("div",{className:"app",children:[!i&&Object(h.jsx)(I,{setIsChecked:l,setIsSavedList:m}),!n&&i&&(j?Object(h.jsx)(w,{setUser:s,storageKey:b,setIsSavedList:m}):Object(h.jsx)(C,{setUser:s,storageKey:b})),n&&Object(h.jsxs)("div",{className:"todoapp-wrapper",children:[Object(h.jsx)("section",{className:"todoapp",children:Object(h.jsx)(v,{id:n.id})}),Object(h.jsx)(g,{name:n.name})]})]})});a.a.render(Object(h.jsx)(U,{}),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.46e8268d.chunk.js.map