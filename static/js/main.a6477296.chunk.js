(this.webpackJsonptodo_app=this.webpackJsonptodo_app||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),a=n(6),r=n.n(a),i=(n(11),n(12),n(13),n(2)),l=n(3),s=n(4),u=n.n(s),d=function(e,t){return fetch("".concat("https://mate.academy/students-api").concat(e),t).then((function(e){if(!e.ok)throw new Error("Problem with loading data...");return e.json()}))},j=function(e,t){return d(e,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)})},m=function(e,t){var n,c;n="/todos/".concat(e),c=t,d(n,{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(c)})},b=function(e){return d("/todos/".concat(e),{method:"DELETE"})},f=n(0),h=o.a.memo((function(e){var t=e.item,n=Object(c.useContext)(x),o=n.setTodos,a=n.setToggleAll,r=Object(c.useState)(!1),s=Object(i.a)(r,2),d=s[0],j=s[1],h=Object(c.useState)(""),p=Object(i.a)(h,2),O=p[0],v=p[1],g=function(e){o((function(n){return n.map((function(n){return n.id===t.id?(m(e,{title:O}),Object(l.a)(Object(l.a)({},n),{},{title:O})):n}))}))};return Object(f.jsxs)("li",{className:u()({completed:t.completed,editing:d}),onDoubleClick:function(){j(!0)},children:[Object(f.jsxs)("div",{className:"view",children:[Object(f.jsx)("input",{type:"checkbox",className:"toggle",id:"toggle-view",checked:t.completed,onChange:function(){var e;e=t.id,o((function(t){return t.map((function(t){return t.id===e?(t.completed&&a(!1),m(e,{completed:!t.completed}),Object(l.a)(Object(l.a)({},t),{},{completed:!t.completed})):t}))}))}}),Object(f.jsx)("label",{htmlFor:"toggle-view",children:t.title}),Object(f.jsx)("button",{type:"button",className:"destroy",onClick:function(){var e;e=t.id,o((function(t){return t.filter((function(t){return t.id===e&&b(e),t.id!==e}))}))}})]}),d&&Object(f.jsx)("input",{type:"text",className:"edit",value:O,autoFocus:!0,onChange:function(e){return v(e.target.value)},onBlur:function(e){O?(g(t.id),v(""),j(!1)):(v(""),j(!1))},onKeyDown:function(e){"Enter"===e.code&&O&&(g(t.id),v(""),j(!1)),"Escape"===e.code&&(v(""),j(!1))}})]})})),p=function(e){var t=e.items;return Object(f.jsx)("ul",{className:"todo-list",children:t.map((function(e){return Object(f.jsx)(o.a.Fragment,{children:Object(f.jsx)(h,{item:e})},e.id)}))})},O=function(e){var t=e.sortParam,n=e.setSortParam;return Object(f.jsxs)("ul",{className:"filters",children:[Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"#/",className:u()({selected:"all"===t}),onClick:function(){return n("all")},children:"All"})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"#/active",className:u()({selected:"active"===t}),onClick:function(){return n("active")},children:"Active"})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"#/completed",className:u()({selected:"completed"===t}),onClick:function(){return n("completed")},children:"Completed"})})]})},x=o.a.createContext([]),v=o.a.memo((function(e){var t=e.id,n=Object(c.useState)([]),o=Object(i.a)(n,2),a=o[0],r=o[1],s=Object(c.useState)(""),u=Object(i.a)(s,2),h=u[0],v=u[1],g=Object(c.useState)(!1),N=Object(i.a)(g,2),y=N[0],C=N[1],S=Object(c.useState)(!1),k=Object(i.a)(S,2),w=k[0],E=k[1],T=Object(c.useState)("all"),P=Object(i.a)(T,2),A=P[0],F=P[1];Object(c.useEffect)((function(){t&&function(e){return d("/todos?userId=".concat(e))}(t).then(r)}),[t,w]);var I=Object(c.useMemo)((function(){var e=a.reduce((function(e,t){return t.completed?e+1:e}),0);return function(e){e===a.length&&a.length>0&&C(!0),0===e&&C(!1)}(e),e}),[a]),D={todos:a,setTodos:r,setToggleAll:C},J=function(){E((function(e){return!e}))},M=Object(c.useMemo)((function(){switch(A){case"active":return a.filter((function(e){return!e.completed}));case"completed":return a.filter((function(e){return e.completed}));default:return a}}),[A,a]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("header",{className:"header",children:[Object(f.jsx)("h1",{children:"todos"}),Object(f.jsx)("form",{onSubmit:function(e){var n,c;e.preventDefault(),h&&(v(""),(n=h,c=t,j("/todos",{title:n,userId:c,completed:!1})).then(J))},children:Object(f.jsx)("input",{type:"text",className:"new-todo",placeholder:"What needs to be done?",value:h,onChange:function(e){var t=e.target;v(t.value)}})})]}),Object(f.jsxs)("section",{className:"main",children:[Object(f.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",disabled:0===a.length,checked:y,onChange:function(){r(y?function(e){return e.map((function(e){return e.completed?(m(e.id,{completed:!1}),Object(l.a)(Object(l.a)({},e),{},{completed:!1})):(C(!1),e)}))}:function(e){return e.map((function(e){return e.completed?(C(!0),e):(m(e.id,{completed:!0}),Object(l.a)(Object(l.a)({},e),{},{completed:!0}))}))})}}),Object(f.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),Object(f.jsx)(x.Provider,{value:D,children:Object(f.jsx)(p,{items:M})})]}),a.length>0&&Object(f.jsxs)("footer",{className:"footer",children:[Object(f.jsx)("span",{className:"todo-count",children:I>0&&"".concat(I," ").concat(I>1?"items":"item"," left")}),Object(f.jsx)(O,{sortParam:A,setSortParam:F}),Object(f.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){r((function(e){return e.filter((function(e){return e.completed&&b(e.id),!e.completed}))}))},children:I>0&&"Clear completed"})]})]})})),g=function(e){var t=e.name;return Object(f.jsx)("div",{className:"info App-info",children:Object(f.jsxs)("h3",{className:"info-title",children:["by"," ",t||"..."]})})},N=function(){var e=Object(c.useState)({}),t=Object(i.a)(e,2),n=t[0],o=t[1];return Object(c.useEffect)((function(){var e,t,n,c;(e="Ivan Shulhan",t="IvanShulhan",n="vanyashulia.89@gmail.com",c="+380639037909",j("/users",{name:e,username:t,email:n,phone:c})).then(o)}),[]),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("section",{className:"todoapp",children:Object(f.jsx)(v,{id:n.id})}),Object(f.jsx)(g,{name:n.name})]})};r.a.render(Object(f.jsx)(N,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a6477296.chunk.js.map